let optinImage,optinBar,optinButton,optinButtonImage,optinPanel,optButton,main,miniValueLabel,minorValueLabel,majorValueLabel,megaValueLabel,optin=!1;function updateValues(t,e,n,a){miniValueLabel.innerText=t.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),minorValueLabel.innerText=e.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),majorValueLabel.innerText=n.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),megaValueLabel.innerText=a.toLocaleString("ja-JP",{style:"currency",currency:"JPY"})}function applyStyling(t){t?(optButton.innerText="opt out",optinImage.src="mjp-assets/mjp-opt-out-graphic.png",optinBar.style.backgroundImage="url(mjp-assets/mjp-opt-out-base.png)",optinBar.style.alignItems="end",optinPanel.style.backgroundImage="url(mjp-assets/mjp-opt-out-base.png)",optinButtonImage.src="mjp-assets/mjp-opt-out-text-en.png"):(optButton.innerText="opt in",optinImage.src="mjp-assets/mjp-opt-in-graphic.png",optinBar.style.backgroundImage="url(mjp-assets/mjp-opt-in-base.png)",optinBar.style.alignItems="start",optinPanel.style.backgroundImage="url(mjp-assets/mjp-opt-in-base.png)",optinButtonImage.src="mjp-assets/mjp-opt-in-text-en.png")}async function megaJackpot(t){try{const e=t.endpoint+"/feed/jackpotdata?operator="+t.operator+"&player="+t.player+"&hash="+t.hash,n=await fetch(e),a=await n.json();optin=a.player.optinstatus,applyStyling(optin);let o=a.jackpots.MINI_VALUE,p=a.jackpots.MINOR_VALUE,i=a.jackpots.MAJOR_VALUE,l=a.jackpots.MEGA_VALUE;updateValues(o,p,i,l);let r=0;const m=setInterval((()=>{++r>14&&clearInterval(m),o+=a.jackpots.MINI_VELOCITY,p+=a.jackpots.MINOR_VELOCITY,i+=a.jackpots.MAJOR_VELOCITY,l+=a.jackpots.MEGA_VELOCITY,updateValues(o,p,i,l)}),1e3)}catch(t){console.error("Error fetching jackpot data:",t)}}document.addEventListener("DOMContentLoaded",(()=>{optinImage=document.getElementById("optin-image"),optinBar=document.getElementById("optin-bar"),optinButton=document.getElementById("optin"),optinButtonImage=document.getElementById("optin-button-image"),optinPanel=document.getElementById("optin-panel"),optButton=document.getElementById("opt-button"),main=document.getElementById("main"),miniValueLabel=document.getElementById("mini-value"),minorValueLabel=document.getElementById("minor-value"),majorValueLabel=document.getElementById("major-value"),megaValueLabel=document.getElementById("mega-value");let t=!1;optinButton.addEventListener("click",(()=>{if(t=!t,t)return main.style.filter="brightness(75%)",void(optinPanel.style.bottom="0px");main.style.filter="none",optinPanel.style.bottom="-500px"})),optButton.addEventListener("click",(async()=>{const t=megajackpotConfig.endpoint+(optin?"/api/optout?operator=":"/api/optin?operator=")+megajackpotConfig.operator+"&player="+megajackpotConfig.player+"&hash="+megajackpotConfig.hash;try{200===(await fetch(t)).status&&(optin=!optin,applyStyling(optin))}catch(t){console.error("Error opting in/out:",t)}}))}));