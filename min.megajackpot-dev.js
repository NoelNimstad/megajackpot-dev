let elements={},optin=!1;function updateValues(e,t,n,a){elements.miniValueLabel.innerText=e.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),elements.minorValueLabel.innerText=t.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),elements.majorValueLabel.innerText=n.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),elements.megaValueLabel.innerText=a.toLocaleString("ja-JP",{style:"currency",currency:"JPY"})}function applyStyling(e){elements.optinImage.src=e?"mjp-assets/mjp-opt-out-graphic.png":"mjp-assets/mjp-opt-in-graphic.png",elements.optinBar.style.backgroundImage=e?"url(mjp-assets/mjp-opt-out-base.png)":"url(mjp-assets/mjp-opt-in-base.png)",elements.optinBar.style.alignItems=e?"end":"start",elements.optinButtonImage.src=e?"mjp-assets/mjp-opt-out-text-en.png":"mjp-assets/mjp-opt-in-text-en.png"}function constructMegaJackpotBar(){const e=document.getElementById("vision-megajackpot-bar");e.style.height="35px",e.style.width="100%",e.style.maxWidth="100vw",e.style.zIndex=2,e.style.position="relative",e.style.display="flex",e.style.justifyContent="space-between",e.style.overflow="hidden",e.style.fontFamily="sans-serif",e.style.boxShadow="0 0 10px 0 rgba(0, 0, 0, 0.4)",elements.optinBar=e;const t=document.createElement("img");t.style.minWidth="0",t.style.minHeight="0",t.style.maxHeight="35px",t.style.objectFit="contain",e.appendChild(t),elements.optinImage=t;const n=document.createElement("section");n.style.width="fit-content",n.style.height="35px",n.style.paddingLeft="10px",n.style.color="white";const a={duration:1e4,iterations:1/0};n.animate([{transform:"translateY(0px)",offset:0,easing:"cubic-bezier(.9,0,.1,1)"},{transform:"translateY(-35px)",offset:.25,easing:"cubic-bezier(.9,0,.1,1)"},{transform:"translateY(-70px)",offset:.5,easing:"cubic-bezier(.9,0,.1,1)"},{transform:"translateY(-105px)",offset:.75,easing:"cubic-bezier(.9,0,.1,1)"},{transform:"translateY(-140px)",offset:1,easing:"cubic-bezier(.9,0,.1,1)"}],a),e.appendChild(n);const s=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div"),o=document.createElement("div");s.style.maxWidth=i.style.maxWidth=l.style.maxWidth=o.style.maxWidth="max-content",s.style.width=i.style.width=l.style.width=o.style.width="100%",s.style.height=i.style.height=l.style.height=o.style.height="100%",s.style.textAlign=i.style.textAlign=l.style.textAlign=o.style.textAlign="center",s.style.display=i.style.display=l.style.display=o.style.display="flex",s.style.alignItems=i.style.alignItems=l.style.alignItems=o.style.alignItems="center",s.style.justifyContent=i.style.justifyContent=l.style.justifyContent=o.style.justifyContent="center",s.style.fontSize=i.style.fontSize=l.style.fontSize=o.style.fontSize="1rem",n.appendChild(s),n.appendChild(i),n.appendChild(l),n.appendChild(o);const p=document.createElement("b");p.textContent="MINI";const c=document.createElement("span"),r=document.createElement("b");r.textContent="MINOR";const m=document.createElement("span"),y=document.createElement("b");y.textContent="MAJOR";const d=document.createElement("span"),g=document.createElement("b");g.textContent="MEGA";const u=document.createElement("span");p.style.marginRight=r.style.marginRight=y.style.marginRight=g.style.marginRight="5px";const h={duration:1e4,iterations:1/0};s.animate([{opacity:1,transform:"translateY(0px)",easing:"cubic-bezier(.9,0,.1,1)"},{opacity:1,transform:"translateY(0px)",offset:.5,easing:"cubic-bezier(.9,0,.1,1)"},{opacity:0,offset:.51,easing:"cubic-bezier(.9,0,.1,1)"},{opacity:0,transform:"translateY(140px)",offset:.6,easing:"cubic-bezier(.9,0,.1,1)"},{opacity:1,offset:.61,easing:"cubic-bezier(.9,0,.1,1)"},{transform:"translateY(140px)",easing:"cubic-bezier(.9,0,.1,1)"}],h),s.appendChild(p),s.appendChild(c),i.appendChild(r),i.appendChild(m),l.appendChild(y),l.appendChild(d),o.appendChild(g),o.appendChild(u),elements.miniValueLabel=c,elements.minorValueLabel=m,elements.majorValueLabel=d,elements.megaValueLabel=u;const f=document.createElement("button");f.style.background="none",f.style.display="flex",f.style.alignItems="center",f.style.height="100%",f.style.border="none",f.style.padding="0px 10px",f.style.fontWeight="bold",f.style.cursor="pointer",e.appendChild(f);const b=document.createElement("img");b.src="mjp-assets/mjp-info-icon.png",b.style.marginRight="5px",b.style.height="13px",f.appendChild(b),elements.optinButton=f;const x=document.createElement("img");x.style.height="13px",f.appendChild(x),elements.optinButtonImage=x}async function megaJackpot(e){try{const t=e.endpoint+"/feed/jackpotdata?operator="+e.operator+"&player="+e.player+"&hash="+e.hash,n=await fetch(t),a=await n.json();optin=a.player.optinstatus,constructMegaJackpotBar(),applyStyling(optin),elements.optinButton.addEventListener("click",(async()=>{const e=megajackpotConfig.endpoint+(optin?"/api/optout?operator=":"/api/optin?operator=")+megajackpotConfig.operator+"&player="+megajackpotConfig.player+"&hash="+megajackpotConfig.hash;try{200===(await fetch(e)).status&&(optin=!optin,applyStyling(optin))}catch(e){}}));let{MINI_VALUE:s,MINOR_VALUE:i,MAJOR_VALUE:l,MEGA_VALUE:o}=a.jackpots;updateValues(s,i,l,o);let p=0;const c=setInterval((()=>{++p>14&&clearInterval(c),s+=a.jackpots.MINI_VELOCITY,i+=a.jackpots.MINOR_VELOCITY,l+=a.jackpots.MAJOR_VELOCITY,o+=a.jackpots.MEGA_VELOCITY,updateValues(s,i,l,o)}),1e3)}catch(e){console.error("Error fetching jackpot data:",e)}}