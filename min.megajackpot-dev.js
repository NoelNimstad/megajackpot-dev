let elements={},optin=!1;function updateValues(e,t,n,a){elements.miniValueLabel.innerText=e.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),elements.minorValueLabel.innerText=t.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),elements.majorValueLabel.innerText=n.toLocaleString("ja-JP",{style:"currency",currency:"JPY"}),elements.megaValueLabel.innerText=a.toLocaleString("ja-JP",{style:"currency",currency:"JPY"})}function applyStyling(e){elements.optButton.innerText=e?"opt out":"opt in",elements.optinImage.src=e?"mjp-assets/mjp-opt-out-graphic.png":"mjp-assets/mjp-opt-in-graphic.png",elements.optinBar.style.backgroundImage=e?"url(mjp-assets/mjp-opt-out-base.png)":"url(mjp-assets/mjp-opt-in-base.png)",elements.optinBar.style.alignItems=e?"end":"start",elements.optinPanel.style.backgroundImage=e?"url(mjp-assets/mjp-opt-out-base.png)":"url(mjp-assets/mjp-opt-in-base.png)",elements.optinButtonImage.src=e?"mjp-assets/mjp-opt-out-text-en.png":"mjp-assets/mjp-opt-in-text-en.png"}async function megaJackpot(e){try{const t=e.endpoint+"/feed/jackpotdata?operator="+e.operator+"&player="+e.player+"&hash="+e.hash,n=await fetch(t),a=await n.json();optin=a.player.optinstatus,applyStyling(optin);let{MINI_VALUE:o,MINOR_VALUE:p,MAJOR_VALUE:l,MEGA_VALUE:s}=a.jackpots;updateValues(o,p,l,s);let m=0;const i=setInterval((()=>{++m>14&&clearInterval(i),o+=a.jackpots.MINI_VELOCITY,p+=a.jackpots.MINOR_VELOCITY,l+=a.jackpots.MAJOR_VELOCITY,s+=a.jackpots.MEGA_VELOCITY,updateValues(o,p,l,s)}),1e3)}catch(e){console.error("Error fetching jackpot data:",e)}}document.addEventListener("DOMContentLoaded",(()=>{elements={optinImage:document.getElementById("optin-image"),optinBar:document.getElementById("optin-bar"),optinButton:document.getElementById("optin"),optinButtonImage:document.getElementById("optin-button-image"),optinPanel:document.getElementById("optin-panel"),optButton:document.getElementById("opt-button"),main:document.getElementById("main"),miniValueLabel:document.getElementById("mini-value"),minorValueLabel:document.getElementById("minor-value"),majorValueLabel:document.getElementById("major-value"),megaValueLabel:document.getElementById("mega-value")};let e=!1;elements.optinButton.addEventListener("click",(()=>{e=!e,elements.main.style.filter=e?"brightness(75%)":"none",elements.optinPanel.style.bottom=e?"0px":"-500px"})),elements.optButton.addEventListener("click",(async()=>{const e=megajackpotConfig.endpoint+(optin?"/api/optout?operator=":"/api/optin?operator=")+megajackpotConfig.operator+"&player="+megajackpotConfig.player+"&hash="+megajackpotConfig.hash;try{200===(await fetch(e)).status&&(optin=!optin,applyStyling(optin))}catch(e){console.error("Error opting in/out:",e)}}))}));